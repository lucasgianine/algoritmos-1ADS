<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    Energia: <input id="input_energia" /> <br />
    Quantidade de Clones: <input id="input_clones" /> <br />
    Clones por Linha: <input id="input_limite_linha" /> <br />
    <button onclick="criar()">Criar Clones</button>
    <div id="div_clones"></div>

    <style>
      img {
        height: 100px;
      }
    </style>
  </body>
</html>

<script>
  function criar() {
    var energia = Number(input_energia.value);
    var clones = Number(input_clones.value);
    var limite_linha = Number(input_limite_linha.value);

    var energia_valida = energia >= 20 && energia <= 5000;
    var clones_validos = clones >= 0 && clones <= 250;
    var limite_valido = limite_linha > 0;
    var entradas_validas = energia_valida && clones_validos && limite_valido;

    div_clones.innerHTML = "";

    if (entradas_validas) {
      var consumo_energia = clones * 20;
      var energia_suficiente = energia >= consumo_energia;

      if (energia_suficiente) {
        var img = `<img src="naruto.png"/>`;
        var contador = 0; // representa o total de clones
        var quebra_linha = 0; // auxiliar para contagem dos clones por linha caso não valide se é múltiplo com %

        while (contador < clones) {
          // quebra_linha++; // incrementa o contador auxiliar de clones por linhas
          contador++;

          div_clones.innerHTML += img; // adiciona imagem na div

          if (contador % limite_linha == 0) {
            // caso o contador seja múltiplo do limite da linha deve quebrar
            div_clones.innerHTML += "<br>";
          }

          //  if (quebra_linha == limite_linha) { // caso o contador auxiliar chegue no limite da linha deve quebrar
          //      div_clones.innerHTML += "<br>";
          //      quebra_linha = 0; // zera o contador de linhas
          //  }
        }

        var sobra_energia = energia - consumo_energia;

        div_clones.innerHTML += ` <br>
            <h3>ANÁLISE DA GERAÇÃO DE CLONES</h3>
            Energia Inicial: ${energia} <br>  
            Qtde de Clones: ${clones} <br>
            Sobra de Energia: ${sobra_energia}
        `;

        var percentual_sobra = (sobra_energia / energia) * 100;

        var sobra_1000 = sobra_energia > 1000; // se sobra mais de 1000 energia
        var clones_50_percentual_20 = clones > 50 && percentual_sobra >= 20; // se fez mais de 50 clones e percentual de sobra é pelo menos 20
        var provavelmente_vai_ganhar_valido = sobra_1000 || clones_50_percentual_20;

        var sobra_500 = sobra_energia > 500; // se sobra mais de 500 energia
        var clones_20_e_50_percentual_10 = clones >= 20 && clones <= 50 && percentual_sobra >= 10; // se fez entre 20 a 50 clones e percentual de sobra é pelo menos 10
        var luta_vai_ser_boa_valido = sobra_500 || clones_20_e_50_percentual_10;

        if (provavelmente_vai_ganhar_valido) {
          // sobra_energia > 1000 || (clones > 50 && percentual_sobra >= 20)
          div_clones.innerHTML += `<p>PROVAVELMENTE VOCE VAI GANHAR</p>`;
        } else if (luta_vai_ser_boa_valido) {
          // sobra_energia > 500 || (clones >= 20 && clones <= 50 && percentual_sobra >= 10)
          div_clones.innerHTML += `<p>A LUTA VAI SER BOA</p>`;
        } else {
          div_clones.innerHTML += `<p>TORÇA PARA O ADVERSÁRIO SER FRAQUINHO</p>`;
        }
      } else {
        alert("ERRO - Energia insuficiente para essa quantidade de clones");
      }
    } else {
      alert(
        "ERRO NA ENTRADA DE DADOS – Energia tem que ser entre 20 e 5.000. Quantidade de Clones tem que ser entre 0 e 250. Quantidade de Clones por linha tem que ser maior que 0"
      );
    }

    // energia < 20 || energia > 5000
  }
</script>

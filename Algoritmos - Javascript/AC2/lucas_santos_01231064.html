<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avaliação Continuada 2</title>
</head>
<body>
    <h1>Naruto - AC2</h1>
    Informe a quantidade de energia: <input type="number" id="input_qtd_energia"> <br>
    Informe a quantidade de clones desejada: <input type="number" id="input_qtd_clones"> <br>
    Informe a quantidade de clones por linha: <input type="number" id="input_clones_linha"> <br>

    <button onclick="criar_clones()">Criar clones</button>
    <div id="div_mensagem"></div>
</body>
</html>

<script>
    function criar_clones() {
        var energia = Number(input_qtd_energia.value); // Qtd. de energia
        var qtd_clones = Number(input_qtd_clones.value); // Qtd. de clones
        var clones_linha = Number(input_clones_linha.value); // Clones por linha

        var sobra_energia = energia - (qtd_clones * 20); // Criei essa variável para facilitar na interpolação da linha "56" e no IF das linhas "58" e "60"

        var percentual = (sobra_energia / energia) * 100; // será usado nos IF e ELSE IF das linhas "58" e "60"

        div_mensagem.innerHTML = "";

        if (energia < 20 || energia > 5000 || qtd_clones < 0 || qtd_clones > 250 || clones_linha < 0) {
            alert("ERRO NA ENTRADA DE DADOS - Energia tem que ser entre 20 e 5.000. Quantidade de Clones tem que ser entre 0 e 250. Quantidade de Clones por linha tem que ser maior que 0");
        }
        else {
            if (energia < (qtd_clones * 20)) {
                alert("Energia insuficiente.");
            }
            else {
                var contador = 1;
                var pula_linha = 1;
                while (contador <= qtd_clones) {
                    div_mensagem.innerHTML += `<img src="naruto.png" style="height: 100px;">`;

                    if (pula_linha == clones_linha) {
                        div_mensagem.innerHTML += `<br>`;
                        pula_linha = 0;
                    }
                    pula_linha++
                    contador++
                }

                div_mensagem.innerHTML += `<h4>ANÁLISE DA GERAÇÃO DE CLONES</h4>
                Energia inicial: ${energia}<br>
                Qtde de Clones: ${qtd_clones}<br>
                Sobra de energia: ${sobra_energia}<br>`;

                if(sobra_energia > 1000 || qtd_clones > 50 && percentual >= 0.2) {
                    div_mensagem.innerHTML += "PROVAVELMENTE VOCE VAI GANHAR";
                } else if (sobra_energia > 500 || qtd_clones >= 20 && percentual >= 0.1) {
                    div_mensagem.innerHTML += "A LUTA VAI SER MUITO BOA";
                } else {
                    div_mensagem.innerHTML += "TORÇA PARA O ADVERSÁRIO SER FRAQUINHO";
                }
            }
        }

    }
</script>